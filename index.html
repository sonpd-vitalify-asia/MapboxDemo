<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Visualize wind data</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.5.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.5.1/mapbox-gl.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>// TO MAKE THE MAP APPEAR YOU MUST
        // ADD YOUR ACCESS TOKEN FROM
        // https://account.mapbox.com
        mapboxgl.accessToken = 'pk.eyJ1Ijoic29ucGR2ZmEiLCJhIjoiY2xha3JncXE3MDhoNDN1cGoxbGozNTZvdCJ9.Bab7ge7IUvqNO6-AAfMWCg';
        const map = new mapboxgl.Map({
            container: 'map', // container ID
            // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
            minzoom:0,
            maxZoom:4,
            style: 'mapbox://styles/mapbox/dark-v11', // style URL
            center: [-74.5, 40], // starting position
            zoom: 9 // starting zoom
        });

        // Add zoom and rotation controls to the map.
        map.addControl(new mapboxgl.NavigationControl());

        map.on('load', () => {
            map.addSource('raster-array-source', {
                'type': 'raster-array',
                // Replace this URL with a 'mapbox://TILESET_ID'
                'url': 'mapbox://sonpdvfa.gfs-example2',
                'tileSize': 512
            });
            map.addLayer({
                'id': 'wind-layer',
                'type': 'raster-particle',
                'source': 'raster-array-source',
                'source-layer': '10winds',
                'paint': {
                    'raster-particle-speed-factor': 0.4,
                    'raster-particle-fade-opacity-factor': 0.9,
                    'raster-particle-reset-rate-factor': 0.4,
                    'raster-particle-count': 4000,
                    'raster-particle-max-speed': 40,
                    'raster-particle-color': [
                        'interpolate',
                        ['linear'],
                        ['raster-particle-speed'],
                        1.5,
                        'rgba(134,163,171,256)',
                        2.5,
                        'rgba(126,152,188,256)',
                        4.12,
                        'rgba(110,143,208,256)',
                        4.63,
                        'rgba(110,143,208,256)',
                        6.17,
                        'rgba(15,147,167,256)',
                        7.72,
                        'rgba(15,147,167,256)',
                        9.26,
                        'rgba(57,163,57,256)',
                        10.29,
                        'rgba(57,163,57,256)',
                        11.83,
                        'rgba(194,134,62,256)',
                        13.37,
                        'rgba(194,134,63,256)',
                        14.92,
                        'rgba(200,66,13,256)',
                        16.46,
                        'rgba(200,66,13,256)',
                        18.0,
                        'rgba(210,0,50,256)',
                        20.06,
                        'rgba(215,0,50,256)',
                        21.6,
                        'rgba(175,80,136,256)',
                        23.66,
                        'rgba(175,80,136,256)',
                        25.21,
                        'rgba(117,74,147,256)',
                        27.78,
                        'rgba(117,74,147,256)',
                        29.32,
                        'rgba(68,105,141,256)',
                        31.89,
                        'rgba(68,105,141,256)',
                        33.44,
                        'rgba(194,251,119,256)',
                        42.18,
                        'rgba(194,251,119,256)',
                        43.72,
                        'rgba(241,255,109,256)',
                        48.87,
                        'rgba(241,255,109,256)',
                        50.41,
                        'rgba(256,256,256,256)',
                        57.61,
                        'rgba(256,256,256,256)',
                        59.16,
                        'rgba(0,256,256,256)',
                        68.93,
                        'rgba(0,256,256,256)',
                        69.44,
                        'rgba(256,37,256,256)'
                    ]
                }
            });
        });</script>

</body>
</html>