(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();function Nt(t){t.addSource("vector-array-source",{type:"vector",tiles:["https://indigo-lab.github.io/plateau-tokyo23ku-building-mvt-2020/{z}/{x}/{y}.pbf"],minzoom:10,maxzoom:16}),t.addLayer({id:"bldg",type:"fill-extrusion",source:"vector-array-source","source-layer":"bldg",minzoom:10,maxzoom:20,paint:{"fill-extrusion-color":["case",["boolean",["feature-state","hover"],!1],"#9e9e9e","#b0b0b0"],"fill-extrusion-height":["get","measuredHeight"]}})}var L=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-L.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?L.Bounce.In(t*2)*.5:L.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),Z=function(){return performance.now()},Rt=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var e,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];for(var i=0,n=r;i<n.length;i++){var s=n[i];(e=s._group)===null||e===void 0||e.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},t.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var a=0,i=e;a<i.length;a++){var n=i[a];n._group=void 0,delete this._tweens[n.getId()],delete this._tweensAddedDuringUpdate[n.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},t.prototype.update=function(e,r){e===void 0&&(e=Z()),r===void 0&&(r=!0);var a=Object.keys(this._tweens);if(a.length!==0)for(;a.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<a.length;i++){var n=this._tweens[a[i]],s=!r;n&&n.update(e,s)===!1&&!r&&this.remove(n)}a=Object.keys(this._tweensAddedDuringUpdate)}},t}(),yt={Linear:function(t,e){var r=t.length-1,a=r*e,i=Math.floor(a),n=yt.Utils.Linear;return e<0?n(t[0],t[1],a):e>1?n(t[r],t[r-1],r-a):n(t[i],t[i+1>r?r:i+1],a-i)},Utils:{Linear:function(t,e,r){return(e-t)*r+t}}},Ct=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),bt=new Rt,at=function(){function t(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=L.Linear.None,this._interpolationFunction=yt.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Ct.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=bt,bt.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,r){if(e===void 0&&(e=Z()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var a in this._valuesStartRepeat)this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var n in this._valuesEnd)i[n]=this._valuesEnd[n];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,r,a,i,n){for(var s in a){var c=e[s],T=Array.isArray(c),l=T?"array":typeof c,b=!T&&Array.isArray(a[s]);if(!(l==="undefined"||l==="function")){if(b){var M=a[s];if(M.length===0)continue;for(var R=[c],y=0,U=M.length;y<U;y+=1){var C=this._handleRelativeValue(c,M[y]);if(isNaN(C)){b=!1,console.warn("Found invalid interpolation list. Skipping.");break}R.push(C)}b&&(a[s]=R)}if((l==="object"||T)&&c&&!b){r[s]=T?[]:{};var I=c;for(var P in I)r[s][P]=I[P];i[s]=T?[]:{};var M=a[s];if(!this._isDynamic){var K={};for(var P in M)K[P]=M[P];a[s]=M=K}this._setupProperties(I,r[s],M,i[s],n)}else(typeof r[s]>"u"||n)&&(r[s]=c),T||(r[s]*=1),b?i[s]=a[s].slice().reverse():i[s]=r[s]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(e){return e===void 0&&(e=Z()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},t.prototype.resume=function(e){return e===void 0&&(e=Z()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},t.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},t.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=L.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=yt.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,r){var a=this,i;if(e===void 0&&(e=Z()),r===void 0&&(r=t.autoStartOnUpdate),this._isPaused)return!0;var n;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,c=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),T=this._duration+this._repeat*c,l=function(){if(a._duration===0||s>T)return 1;var C=Math.trunc(s/c),I=s-C*c,P=Math.min(I/a._duration,1);return P===0&&s===a._duration?1:P},b=l(),M=this._easingFunction(b);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,M),this._onUpdateCallback&&this._onUpdateCallback(this._object,b),this._duration===0||s>=this._duration)if(this._repeat>0){var R=Math.min(Math.trunc((s-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=R);for(n in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[n]=="string"&&(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*R,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var y=0,U=this._chainedTweens.length;y<U;y++)this._chainedTweens[y].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,r,a,i){for(var n in a)if(r[n]!==void 0){var s=r[n]||0,c=a[n],T=Array.isArray(e[n]),l=Array.isArray(c),b=!T&&l;b?e[n]=this._interpolationFunction(c,i):typeof c=="object"&&c?this._updateProperties(e[n],s,c,i):(c=this._handleRelativeValue(s,c),typeof c=="number"&&(e[n]=s+(c-s)*i))}},t.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},t.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],a=this._valuesEnd[e];typeof a=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(a):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},t.autoStartOnUpdate=!1,t}();Ct.nextId;var j=bt;j.getAll.bind(j);j.removeAll.bind(j);j.add.bind(j);j.remove.bind(j);j.update.bind(j);function Wt(t){let e,r,a,i,n=!1;window.tb=new Threebox(t,t.getCanvas().getContext("webgl"),{defaultLights:!0,enableSelectingObjects:!0,enableTooltips:!0}),t.addLayer({id:"flight-route-layer",type:"custom",renderingMode:"3d",onAdd:function(s,c){let T={obj:"../drone.glb",type:"gltf",scale:5,units:"meters",rotation:{x:90,y:0,z:0},adjustment:{x:0,y:0,z:-1.5},anchor:"center"},l={windStrength:.05,windDirection:new THREE.Vector3(0,0,0),routeProgress:0,time:0,pan:!1};a=new THREE.Clock,tb.loadObj(T,function(b){e=b.setCoords([139.69068762354476,35.683589708868226]),e.fixedZoom=15,tb.add(e);let M,R,y,U,C=[],I,P={geometry:{coordinates:[[139.6870850942044,35.68271466831231,240],[139.690901499203,35.68510234388414,240],[139.6866881438094,35.69385167099468,240],[139.6870850942044,35.68271466831231,240]],type:"LineString"}};function K(o){var u={path:o.geometry.coordinates};let g=u.path;M=tb.line({geometry:g,width:5,color:"steelblue",opacity:.51}),tb.add(M)}const It=139.68786,jt=35.68355,xt=100,z={width:15,height:15,depth:2},wt=.05,kt=new THREE.Vector3(.2,.1,.05),zt=50;let A=Array.from({length:z.width},(o,u)=>Array.from({length:z.height},(g,f)=>Array.from({length:z.depth},(v,d)=>{let _=It+(u-z.width/2)/z.width*wt*2,p=jt+(f-z.height/2)/z.height*wt*2,h=xt+(d-z.depth/2)*zt,O=new THREE.Vector3((Math.random()-.5)*.1,(Math.random()-.5)*.1,(Math.random()-.5)*.05);return{position:[_,p,h],wind:kt.clone().add(O)}})));function Mt(o){y=structuredClone(o.geometry.coordinates);for(let p=0;p<y.length;p++){let[h,O,S]=y[p],w=At(h,O,S),x=h+w.x*l.windStrength/50,E=O+w.y*l.windStrength/50,H=S+w.z*l.windStrength/50;y[p]=[x,E,H]}R!==void 0&&tb.remove(R),R=tb.line({geometry:y,width:5,color:"red"}),tb.add(R),C=[];for(var u=1;u<y.length;u++)for(var g=y[u-1],f=y[u],v=.005,d=0;d<1;d+=v){var _=qt(g[1],g[0],f[1],f[0],d);_[2]=f[2],C.push(_)}}function At(o,u,g){let f=new THREE.Vector3(0,0,0),v=1/0;for(let d=0;d<A.length;d++)for(let _=0;_<A[d].length;_++)for(let p=0;p<A[d][_].length;p++){let h=A[d][_][p],[O,S,w]=h.position,x=Math.sqrt(Math.pow(O-o,2)+Math.pow(S-u,2)+Math.pow(w-g,2));x<v&&(v=x,f=h.wind)}return f}function mt(o){for(let F=0;F<A.length;F++)for(let N=0;N<A[F].length;N++)for(let pt=0;pt<A[F][N].length;pt++){let Ot=A[F][N][pt],vt=Ot.wind,W=Ot.position,_t=[W[0]+vt.x*.01,W[1]+vt.y*.01,W[2]+vt.z*5];var u=new THREE.Vector3(W[0],W[1],W[2]),g=new THREE.Vector3(_t[0],_t[1],_t[2]),f=u.clone().sub(g),v=5,d=u.clone();for(let V=1;V<v;V++){var _=new THREE.Vector3(f.x*V/v,f.y*V/v,f.z*V/v),p=u.clone().add(_),h=[d.x,d.y,d.z],O=[p.x,p.y,p.z],S=25e-5,w=[O[0]-h[0],O[1]-h[1]],x=Math.sqrt(w[0]*w[0]+w[1]*w[1]),E=[w[0]/x,w[1]/x],H=E[0]*Math.sqrt(3)/2-E[1]*1/2,ut=E[0]*1/2+E[1]*Math.sqrt(3)/2,ft=E[0]*Math.sqrt(3)/2+E[1]*1/2,tt=-E[0]*1/2+E[1]*Math.sqrt(3)/2;let et=[h[0]+S*H,h[1]+S*ut,h[2]],rt=[h[0]+S*ft,h[1]+S*tt,h[2]],it=o.line({geometry:[h,et],width:3,color:"blue"}),nt=o.line({geometry:[h,rt],width:3,color:"blue"});o.add(it),o.add(nt);var k=2,q=[(h[0]+et[0])/2,(h[1]+et[1])/2,(h[2]+et[2])/2],m=[(h[0]+rt[0])/2,(h[1]+rt[1])/2,(h[2]+rt[2])/2],G=[q[0]-f.x*k,q[1]-f.y*k,q[2]-f.z*k],B=[m[0]-f.x*k,m[1]-f.y*k,m[2]-f.z*k],Q=o.projectToWorld(G),J=o.projectToWorld(B),ct=new at(it.position).to(Q,4e3).easing(L.Quadratic.Out).repeat(1/0).onUpdate(function(){it.material.opacity-=1/90}).onRepeat(function(){it.material.opacity=1}).start(),dt=new at(nt.position).to(J,4e3).easing(L.Quadratic.Out).repeat(1/0).onUpdate(function(){nt.material.opacity-=1/90}).onRepeat(function(){nt.material.opacity=1}).start();st.add(ct),st.add(dt),d=p.clone()}}}function Ft(){let o=new dat.GUI;o.add(l,"windStrength",0,.08).name("Wind Strength").onChange(function(){Mt(P),lt(l.routeProgress)}),o.add(l,"routeProgress",0,1).name("Route Progress").onChange(function(){lt(l.routeProgress)}),o.add(l,"pan").name("Camera Follow Drone").onChange(function(){});var u=o.addFolder("Performance");i=document.createElement("li"),i.classList.add("gui-stats"),i.innerHTML="<i>Time: </i> "+l.time;var g={Track:function(){n=!0,lt(l.routeProgress)}};o.add(g,"Track");var f={Stop:function(){n=!1}};o.add(f,"Stop");var v={Reset:function(){l.time=0,i.innerHTML="<i>Time: </i> "+St(l.time)}};o.add(v,"Reset"),u.domElement.appendChild(i),u.open()}const st=new Rt;let D;const Lt=.001;let Tt=new THREE.AnimationMixer,Ut=e.animations;Tt.clipAction(Ut[0],b).play(),Ft(),K(P),Mt(P),mt(tb),Ht(),Pt();var X=1,ot=X,ht=!0,Y;l.routeProgress=0,e=b.setCoords(C[0]),console.log("total points: "+C.length);function Pt(o){requestAnimationFrame(Pt),Tt.update(1/60),r.coordinates!==e.coordinates&&r.setCoords(e.coordinates);var u=a.getDelta();if(ot+=u,ot>X&&(ht=!ht,ht?Y=new at(I.color).to({r:0,g:1,b:0},X*1e3).start():Y=new at(I.color).to({r:0,g:0,b:0},X*1e3).start(),ot=0),Y&&Y.update(o),st.update(o),n){if(l.time+=u,i.innerHTML="<i>Time: </i> "+St(l.time),D){l.routeProgress+=Lt,l.routeProgress>1&&(l.routeProgress=0);const f=D.getPointAt(l.routeProgress);var g=tb.unprojectFromWorld(f);e.setCoords(g);let v=D.getTangentAt(l.routeProgress).normalize(),d=new THREE.Vector3(0,0,0),_=new THREE.Vector3(0,1,0);d.crossVectors(_,v).normalize();let p=Math.acos(_.dot(v)),h={worldCoordinates:f};h.quaternion=[d,p],e._setObject(h)}}else e.setCoords(e.coordinates);l.pan&&s.panTo(e.coordinates)}function St(o){var u=new Date(1970,0,1);return u.setSeconds(o),u.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")}function lt(o){var u={path:C,duration:2e4};if(U=e.followPath(u,function(){}),D=U.animationQueue[0].parameters.pathCurve,o){const f=D.getPointAt(l.routeProgress);var g=tb.unprojectFromWorld(f);e.setCoords(g)}}function Ht(){I=tb.material({material:new THREE.MeshStandardMaterial({color:"#adfc03"})});var o=new THREE.TorusGeometry(90,5,9,18);r=new THREE.Mesh(o,I),r=tb.Object3D({obj:r,units:"meters",adjustment:{x:0,y:0,z:1},anchor:"center"}),r.setCoords(e.coordinates),tb.add(r)}function qt(o,u,g,f,v){var d=$(o),_=$(u),p=$(g),h=$(f),O=Math.sin(d),S=Math.cos(d),w=Math.sin(_),x=Math.cos(_),E=Math.sin(p),H=Math.cos(p),ut=Math.sin(h),ft=Math.cos(h),tt=p-d,k=h-_,q=Math.sin(tt/2)*Math.sin(tt/2)+Math.cos(d)*Math.cos(p)*Math.sin(k/2)*Math.sin(k/2),m=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q)),G=Math.sin((1-v)*m)/Math.sin(m),B=Math.sin(v*m)/Math.sin(m),Q=G*S*x+B*H*ft,J=G*S*w+B*H*ut,ct=G*O+B*E,dt=Math.atan2(ct,Math.sqrt(Q*Q+J*J)),F=Math.atan2(J,Q),N=[(Et(F)+540)%360-180,Et(dt)];return N}function $(o){return o*Math.PI/180}function Et(o){return o*180/Math.PI}})},render:function(s,c){tb.update()}})}const Dt="pk.eyJ1IjoidmZhc29ucGQiLCJhIjoiY2tvbTl3NHFvMHU1YjJ3bzd4cnp0c2h2NSJ9.MXSJRTka-63tR-t8RK-Xag";mapboxgl.accessToken=Dt;const Gt=[139.68786,35.68355],gt=new mapboxgl.Map({container:"map",center:Gt,zoom:15.27,pitch:42,bearing:-50,style:"mapbox://styles/mapbox/satellite-v9",minZoom:10,maxZoom:16,maxPitch:80});gt.on("style.load",function(){Nt(gt),Wt(gt)});
